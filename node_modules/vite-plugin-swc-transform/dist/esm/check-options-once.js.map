{"version":3,"file":"check-options-once.js","sources":["../../src/check-options-once.ts"],"sourcesContent":["import type { JscConfig, TransformConfig } from \"@swc/core\";\nimport type { SWCOptions } from \"./index.js\";\n\nexport function checkSwcOptionsOnce({\n  swcOptions,\n  suppressLegacyDecoratorNoExplicitUDFCFWarning,\n}: {\n  swcOptions: SWCOptions;\n  suppressLegacyDecoratorNoExplicitUDFCFWarning: boolean;\n}): {\n  jsc: JscConfig | null;\n  legacyDecorator: boolean;\n} {\n  const jsc = swcOptions.jsc ?? null;\n  const legacyDecorator = jsc ? jsc.transform?.legacyDecorator === true : false;\n\n  if (legacyDecorator) {\n    const legacyDecoratorNoExplicitUDFCF = !(\n      \"useDefineForClassFields\" in\n      ((jsc as JscConfig).transform as TransformConfig)\n    );\n\n    if (\n      legacyDecoratorNoExplicitUDFCF &&\n      !suppressLegacyDecoratorNoExplicitUDFCFWarning\n    ) {\n      console.warn(\n        \"[vite-plugin-swc-transform] SWC option 'jsc.transform.legacyDecorator' enabled without an explicit 'jsc.transform.useDefineForClassFields' value.\\n\" +\n          \"To remove this warning, either:\\n\" +\n          \" - unset or disable SWC option 'jsc.transform.legacyDecorator' if not needed\\n\" +\n          \" - set an explicit value for SWC option 'jsc.transform.useDefineForClassFields: boolean'\\n\" +\n          \" - pass vite-plugin-swc-transform option 'suppressLegacyDecoratorNoExplicitUDFCFWarning: true'\",\n      );\n    }\n  }\n\n  return { jsc, legacyDecorator };\n}\n"],"names":["checkSwcOptionsOnce","swcOptions","suppressLegacyDecoratorNoExplicitUDFCFWarning","jsc","legacyDecorator","transform","legacyDecoratorNoExplicitUDFCF","console","warn"],"mappings":"AAGO,SAASA,mBAAoB,CAAA,EAClCC,UAAU,EACVC,6CAA6C,EAI9C,EAAA;IAIC,MAAMC,GAAAA,GAAMF,UAAWE,CAAAA,GAAG,IAAI,IAAA;AAC9B,IAAA,MAAMC,kBAAkBD,GAAMA,GAAAA,GAAAA,CAAIE,SAAS,EAAED,oBAAoB,IAAO,GAAA,KAAA;AAExE,IAAA,IAAIA,eAAiB,EAAA;AACnB,QAAA,MAAME,iCAAiC,EACrC,6BACC,GAACH,CAAkBE,SAAS,CAAmB;QAGlD,IACEC,8BAAAA,IACA,CAACJ,6CACD,EAAA;AACAK,YAAAA,OAAAA,CAAQC,IAAI,CACV,qJACE,GAAA,mCAAA,GACA,mFACA,4FACA,GAAA,gGAAA,CAAA;AAEN;AACF;IAEA,OAAO;AAAEL,QAAAA,GAAAA;AAAKC,QAAAA;AAAgB,KAAA;AAChC;;;;"}